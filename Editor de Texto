def pegar_mensagem(mensagem):
    while True:
        trecho_alvo = input("Qual palavra deseja modificar? ")

        ## Verificar se a mensagem que o usuário deseja modificar está dentro do texto
        if trecho_alvo in mensagem:
        ## Se estiver, transformar em lista para verificar índice depois
            lista_palavras = mensagem.split()
            ## Verificar índice
            indice = lista_palavras.index(trecho_alvo)

            return trecho_alvo, lista_palavras, indice

        else:
            ## Loop
            print("Texto não encontrado.")


def modificar_mensagem(acao, lista_mensagem, trecho_alvo, indice, novo_trecho=None):
    nova_lista = []
    for i, palavra in enumerate (lista_mensagem):
        nova_lista.append(palavra)
        ## Adicionar novo_trecho após identificar trecho_alvo
        if acao == "adicionar" and i == indice:
            nova_lista.append(novo_trecho)
        elif acao == "remover" and i == indice:
            nova_lista.pop(indice)
        else:
            print("Operação inválida.")

    return nova_lista


sair = "N"

while sair == "N":
    print("---Editor de Texto---")

    texto = input("Escreva....\n")
    menu = int(input("O que deseja fazer (selecione o número correspondente)?\n\n[1] Acrescentar palavra.\n[2] Remover palavra.\n[3] Contar palavra.\n[4] Substituir palavra\n\n"))

    # Acrescentar texto
    if menu == 1:
        palavra_alvo, lista_texto, i = pegar_mensagem(texto)
        palavra_nova = input("O que deseja inserir? ")
        novo_texto = modificar_mensagem("adicionar", lista_texto, palavra_alvo, i, palavra_nova)
        print("Texto atualizado!\n\n"," ".join(novo_texto))

        print(nova_lista_texto)

    # Remover texto
    elif menu == 2:
        palavra_alvo, lista_texto, i = pegar_mensagem(texto)
        novo_texto = modificar_mensagem("remover", lista_texto, palavra_alvo, i)
        print("Texto atualizado!\n\n"," ".join(lista_texto))

    # Contar texto
    elif menu == 3:
        palavra_para_contar = input("Insira qual palavra deseja contar: ")
        contador = texto.count(palavra_para_contar)
        print(f"{palavra_para_contar} foi encontrada {contador}x.")

    # Substituir texto
    elif menu == 4:
        palavra_alvo, lista_texto, indice = pegar_mensagem(texto)
        palavra_nova = input("Por qual mensagem deseja substituir? ")
        print(" ")
        texto = texto.replace(palavra_alvo, palavra_nova)
        print("Texto atualizado! \n\n", texto)

    else:
        print("Opção inválida.")

    sair = input("Deseja sair? [S/N]")
